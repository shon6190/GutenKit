{"version":3,"file":"editor-app.js","mappings":";;;;AAAA;AACA;AACA;AACA,MAAM;EAAEA,QAAQ;EAAEC,SAAS;EAAEC;AAAc,CAAC,GAAGC,EAAE,CAACC,OAAO;AACzD,MAAM;EAAEC,MAAM;EAAEC,WAAW;EAAEC,KAAK;EAAEC,SAAS;EAAEC;AAAc,CAAC,GAAGN,EAAE,CAACO,UAAU;;AAE9E;AACA,MAAMC,WAAW,GAAG,CAChB;EAAEC,KAAK,EAAE,YAAY;EAAEC,KAAK,EAAE;AAAO,CAAC,EACtC;EAAED,KAAK,EAAE,cAAc;EAAEC,KAAK,EAAE;AAAS,CAAC,EAC1C;EAAED,KAAK,EAAE,cAAc;EAAEC,KAAK,EAAE;AAAQ,CAAC;AAAE;AAC3C;AACA;EAAED,KAAK,EAAE,UAAU;EAAEC,KAAK,EAAE;AAAM,CAAC;AAAQ;;AAE3C;EAAED,KAAK,EAAE,WAAW;EAAEC,KAAK,EAAE;AAAW,CAAC,EACzC;EAAED,KAAK,EAAE,mBAAmB;EAAEC,KAAK,EAAE;AAAgB,CAAC;AAAE;;AAExD;EAAED,KAAK,EAAE,aAAa;EAAEC,KAAK,EAAE;AAAQ,CAAC,EACxC;EAAED,KAAK,EAAE,aAAa;EAAEC,KAAK,EAAE;AAAO,CAAC;AAAE;AACzC;EAAED,KAAK,EAAE,SAAS;EAAEC,KAAK,EAAE;AAAU,CAAC;AAAE;;AAExC;EAAED,KAAK,EAAE,aAAa;EAAEC,KAAK,EAAE;AAAO,CAAC,EACvC;EAAED,KAAK,EAAE,kBAAkB;EAAEC,KAAK,EAAE;AAAW,CAAC;AAAE;AAClD;EAAED,KAAK,EAAE,aAAa;EAAEC,KAAK,EAAE;AAAO,CAAC;AAAU;;AAEjD;EAAED,KAAK,EAAE,cAAc;EAAEC,KAAK,EAAE;AAAQ,CAAC,EACzC;EAAED,KAAK,EAAE,aAAa;EAAEC,KAAK,EAAE;AAAO,CAAC;AAAE;;AAEzC;EAAED,KAAK,EAAE,gBAAgB;EAAEC,KAAK,EAAE;AAAW,CAAC;AAAE;AAChD;EAAED,KAAK,EAAE,0BAA0B;EAAEC,KAAK,EAAE;AAAa,CAAC,CAAE;AAAA,CAC/D;;AAED;AACA,MAAMC,UAAU,GAAID,KAAK,IAAKA,KAAK,CAACE,WAAW,CAAC,CAAC,CAACC,OAAO,CAAC,aAAa,EAAE,EAAE,CAAC;;AAE5E;AACA,MAAMC,kBAAkB,GAAGA,CAAC;EAAEC,aAAa;EAAEC;AAAU,CAAC,KAAK;EACzD;EACA,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGrB,QAAQ,CAACkB,aAAa,CAACE,MAAM,IAAI,EAAE,CAAC;EAChE,MAAM,CAACE,QAAQ,EAAEC,WAAW,CAAC,GAAGvB,QAAQ,CAAC,KAAK,CAAC;EAC/C,MAAM,CAACwB,aAAa,EAAEC,gBAAgB,CAAC,GAAGzB,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;EAC1D,MAAM,CAAC0B,OAAO,EAAEC,UAAU,CAAC,GAAG3B,QAAQ,CAAC,EAAE,CAAC;EAC1C,MAAM,CAAC4B,QAAQ,EAAEC,WAAW,CAAC,GAAG7B,QAAQ,CAACkB,aAAa,CAACU,QAAQ,IAAI,EAAE,CAAC;EACtE;EACA,MAAME,QAAQ,GAAIC,IAAI,IAAK;IACvB,MAAMC,QAAQ,GAAG;MACbD,IAAI,EAAEA,IAAI;MACVE,GAAG,EAAE,aAAab,MAAM,CAACc,MAAM,EAAE;MACjCtB,KAAK,EAAE,OAAOmB,IAAI,QAAQ;MAC1BI,OAAO,EAAE;IACb,CAAC;IACDd,SAAS,CAAC,CAAC,GAAGD,MAAM,EAAEY,QAAQ,CAAC,CAAC;IAChCP,gBAAgB,CAACO,QAAQ,CAAC,CAAC,CAAC;EAChC,CAAC;;EAED;EACA,MAAMI,WAAW,GAAGA,CAACC,KAAK,EAAEC,QAAQ,EAAEzB,KAAK,KAAK;IAC5C,MAAM0B,SAAS,GAAGnB,MAAM,CAACoB,GAAG,CAAC,CAACC,KAAK,EAAEC,CAAC,KAAK;MACvC,IAAIA,CAAC,KAAKL,KAAK,EAAE;QACb;QACA,IAAIC,QAAQ,KAAK,KAAK,EAAE;UACpBzB,KAAK,GAAGA,KAAK,CAACE,WAAW,CAAC,CAAC,CAACC,OAAO,CAAC,aAAa,EAAE,EAAE,CAAC;QAC1D;QACA,OAAO;UAAE,GAAGyB,KAAK;UAAE,CAACH,QAAQ,GAAGzB;QAAM,CAAC;MAC1C;MACA,OAAO4B,KAAK;IAChB,CAAC,CAAC;IACFpB,SAAS,CAACkB,SAAS,CAAC;IACpB;IACAd,gBAAgB,CAACc,SAAS,CAACF,KAAK,CAAC,CAAC;EACtC,CAAC;;EAED;EACA,MAAMM,WAAW,GAAIN,KAAK,IAAK;IAC3BhB,SAAS,CAACD,MAAM,CAACwB,MAAM,CAAC,CAACC,CAAC,EAAEH,CAAC,KAAKA,CAAC,KAAKL,KAAK,CAAC,CAAC;IAC/CZ,gBAAgB,CAAC,IAAI,CAAC;EAC1B,CAAC;;EAED;EACA,MAAMqB,iBAAiB,GAAIb,GAAG,IAAK;IAC/B,MAAMc,QAAQ,GAAGC,QAAQ,CAACC,cAAc,CAAC,uBAAuB,CAAC;IACjE,MAAMC,KAAK,GAAGH,QAAQ,CAACI,cAAc;IACrC,MAAMC,GAAG,GAAGL,QAAQ,CAACM,YAAY;IACjC,MAAMC,IAAI,GAAGP,QAAQ,CAAClC,KAAK;IAC3B,MAAM0C,GAAG,GAAG,KAAKtB,GAAG,IAAI;IAExB,MAAMuB,UAAU,GAAGF,IAAI,CAACG,SAAS,CAAC,CAAC,EAAEP,KAAK,CAAC,GAAGK,GAAG,GAAGD,IAAI,CAACG,SAAS,CAACL,GAAG,CAAC;IACvEvB,WAAW,CAAC2B,UAAU,CAAC;;IAEvB;IACAE,UAAU,CAAC,MAAM;MACbX,QAAQ,CAACY,KAAK,CAAC,CAAC;MAChBZ,QAAQ,CAACa,iBAAiB,CAACV,KAAK,GAAGK,GAAG,CAACrB,MAAM,EAAEgB,KAAK,GAAGK,GAAG,CAACrB,MAAM,CAAC;IACtE,CAAC,EAAE,EAAE,CAAC;EACV,CAAC;EACD;EACA;EACA,MAAM2B,UAAU,GAAGA,CAAA,KAAM;IACrBtC,WAAW,CAAC,IAAI,CAAC;IACjBI,UAAU,CAAC,qBAAqB,CAAC;IAEjC,MAAMmC,IAAI,GAAG;MACTC,MAAM,EAAE,8BAA8B;MACtCC,KAAK,EAAEC,kBAAkB,CAACD,KAAK;MAC/BE,UAAU,EAAE/C,SAAS;MACrBgD,WAAW,EAAEC,IAAI,CAACC,SAAS,CAAC;QAAEjD,MAAM;QAAEQ;MAAS,CAAC;IACpD,CAAC;IAED0C,MAAM,CAACC,IAAI,CAACC,OAAO,EAAEV,IAAI,CAAC,CACrBW,IAAI,CAACC,QAAQ,IAAI;MACd,IAAIA,QAAQ,CAACC,OAAO,EAAE;QAClBhD,UAAU,CAAC,sCAAsC,CAAC;QAClDiD,YAAY,CAAC,CAAC,CAAC,CAAC;MACpB,CAAC,MAAM;QACHjD,UAAU,CAAC,YAAY+C,QAAQ,CAACZ,IAAI,CAACpC,OAAO,EAAE,CAAC;QAC/CH,WAAW,CAAC,KAAK,CAAC;MACtB;IACJ,CAAC,CAAC,CACDsD,IAAI,CAAC,MAAM;MACRlD,UAAU,CAAC,+CAA+C,CAAC;MAC3DJ,WAAW,CAAC,KAAK,CAAC;IACtB,CAAC,CAAC;EACV,CAAC;;EAED;EACA,MAAMqD,YAAY,GAAGA,CAAA,KAAM;IACvBN,MAAM,CAACC,IAAI,CAACC,OAAO,EAAE;MACjBT,MAAM,EAAE,kBAAkB;MAC1BC,KAAK,EAAEC,kBAAkB,CAACD;IAC9B,CAAC,CAAC,CACDS,IAAI,CAACC,QAAQ,IAAI;MACd,IAAIA,QAAQ,CAACC,OAAO,EAAE;QAClBhD,UAAU,CAAC,wCAAwC,CAAC;MACxD,CAAC,MAAM;QACHA,UAAU,CAAC,oCAAoC+C,QAAQ,CAACI,MAAM,EAAE,CAAC;MACrE;IACJ,CAAC,CAAC,CACDD,IAAI,CAAC,MAAM;MACRlD,UAAU,CAAC,4CAA4C,CAAC;IAC5D,CAAC,CAAC,CACDoD,MAAM,CAAC,MAAM;MACVxD,WAAW,CAAC,KAAK,CAAC;IACtB,CAAC,CAAC;EACN,CAAC;;EAGD;EACA,MAAMyD,sBAAsB,GAAGA,CAACvC,KAAK,EAAEwC,UAAU,EAAEC,eAAe,EAAEC,kBAAkB,KAAK;IACvF;IACA,MAAMC,SAAS,GAAG3C,KAAK,CAAC2C,SAAS,IAAI,EAAE;;IAEvC;IACA,MAAMC,WAAW,GAAItD,IAAI,IAAK;MAC1B,MAAMuD,WAAW,GAAG;QAChBvD,IAAI,EAAEA,IAAI;QACVE,GAAG,EAAEnB,UAAU,CAAC,aAAasE,SAAS,CAAClD,MAAM,IAAIH,IAAI,EAAE,CAAC;QACxDnB,KAAK,EAAE,OAAOmB,IAAI,YAAY;QAC9BI,OAAO,EAAE;MACb,CAAC;MACD;MACA+C,eAAe,CAACD,UAAU,EAAE,WAAW,EAAE,CAAC,GAAGG,SAAS,EAAEE,WAAW,CAAC,CAAC;IACzE,CAAC;;IAED;IACA,MAAMC,cAAc,GAAGA,CAACC,QAAQ,EAAElD,QAAQ,EAAEzB,KAAK,KAAK;MAClD,MAAM4E,YAAY,GAAGL,SAAS,CAAC5C,GAAG,CAAC,CAACkD,QAAQ,EAAEhD,CAAC,KAAK;QAChD,IAAIA,CAAC,KAAK8C,QAAQ,EAAE;UAChB;UACA,IAAIlD,QAAQ,KAAK,KAAK,EAAE;YACpBzB,KAAK,GAAGC,UAAU,CAACD,KAAK,CAAC;UAC7B;UACA,OAAO;YAAE,GAAG6E,QAAQ;YAAE,CAACpD,QAAQ,GAAGzB;UAAM,CAAC;QAC7C;QACA,OAAO6E,QAAQ;MACnB,CAAC,CAAC;MACFR,eAAe,CAACD,UAAU,EAAE,WAAW,EAAEQ,YAAY,CAAC;IAC1D,CAAC;;IAED;IACA,MAAME,cAAc,GAAIH,QAAQ,IAAK;MACjC,MAAMC,YAAY,GAAGL,SAAS,CAACxC,MAAM,CAAC,CAACC,CAAC,EAAEH,CAAC,KAAKA,CAAC,KAAK8C,QAAQ,CAAC;MAC/DN,eAAe,CAACD,UAAU,EAAE,WAAW,EAAEQ,YAAY,CAAC;IAC1D,CAAC;;IAED;IACA,MAAMG,sBAAsB,GAAGA,CAACF,QAAQ,EAAEF,QAAQ,KAAK;MACnD,OAAOtF,aAAa,CAChBM,SAAS,EACT;QAAEqF,KAAK,EAAE,GAAGH,QAAQ,CAAC9E,KAAK,KAAK8E,QAAQ,CAAC3D,IAAI,GAAG;QAAE+D,WAAW,EAAE,KAAK;QAAE7D,GAAG,EAAEuD,QAAQ;QAAEO,SAAS,EAAE;MAA8B,CAAC,EAC9H7F,aAAa,CAACI,WAAW,EAAE;QACvBM,KAAK,EAAE,iBAAiB;QACxBC,KAAK,EAAE6E,QAAQ,CAAC9E,KAAK;QACrBoF,QAAQ,EAAEC,GAAG,IAAIV,cAAc,CAACC,QAAQ,EAAE,OAAO,EAAES,GAAG;MAC1D,CAAC,CAAC,EACF/F,aAAa,CAACI,WAAW,EAAE;QACvBM,KAAK,EAAE,+BAA+B;QACtCC,KAAK,EAAE6E,QAAQ,CAACzD,GAAG;QACnBiE,IAAI,EAAE,gFAAgF;QACtFF,QAAQ,EAAEC,GAAG,IAAIV,cAAc,CAACC,QAAQ,EAAE,KAAK,EAAES,GAAG;MACxD,CAAC,CAAC,EACF/F,aAAa,CAACO,aAAa,EAAE;QACzBG,KAAK,EAAE,gBAAgB;QACvBC,KAAK,EAAE6E,QAAQ,CAAC3D,IAAI;QACpBoE,OAAO,EAAExF,WAAW,CAAC6B,GAAG,CAAC4D,CAAC,KAAK;UAAExF,KAAK,EAAEwF,CAAC,CAACxF,KAAK;UAAEC,KAAK,EAAEuF,CAAC,CAACvF;QAAM,CAAC,CAAC,CAAC,CAAC+B,MAAM,CAACwD,CAAC,IAAIA,CAAC,CAACvF,KAAK,KAAK,UAAU,CAAC;QACvGmF,QAAQ,EAAEC,GAAG,IAAIV,cAAc,CAACC,QAAQ,EAAE,MAAM,EAAES,GAAG;MACzD,CAAC,CAAC,EACF/F,aAAa,CAACG,MAAM,EAAE;QAClBgG,aAAa,EAAE,IAAI;QACnBC,OAAO,EAAEA,CAAA,KAAMX,cAAc,CAACH,QAAQ,CAAC;QACvCe,KAAK,EAAE;UAAEC,SAAS,EAAE;QAAO;MAC/B,CAAC,EAAE,kBAAkB,CACzB,CAAC;IACL,CAAC;IAED,OAAOtG,aAAa,CAChBM,SAAS,EACT;MAAEqF,KAAK,EAAE,qBAAqB;MAAEC,WAAW,EAAE;IAAK,CAAC;IAEnD;IACA5F,aAAa,CAAC,IAAI,EAAE,IAAI,EAAE,mBAAmB,CAAC,EAC9CA,aAAa,CAAC,KAAK,EAAE;MAAEqG,KAAK,EAAE;QAAEE,OAAO,EAAE,MAAM;QAAEC,QAAQ,EAAE,MAAM;QAAEC,GAAG,EAAE,KAAK;QAAEC,YAAY,EAAE;MAAO;IAAE,CAAC,EACnGjG,WAAW,CAACiC,MAAM,CAACwD,CAAC,IAAIA,CAAC,CAACvF,KAAK,KAAK,UAAU,IAAIuF,CAAC,CAACvF,KAAK,KAAK,YAAY,CAAC,CAAC2B,GAAG,CAACT,IAAI,IAChF7B,aAAa,CAACG,MAAM,EAAE;MAClBwG,WAAW,EAAE,IAAI;MACjBP,OAAO,EAAEA,CAAA,KAAMjB,WAAW,CAACtD,IAAI,CAAClB,KAAK;IACzC,CAAC,EAAEkB,IAAI,CAACnB,KAAK,CACjB,CACJ,CAAC;IAED;IACAV,aAAa,CAAC,IAAI,EAAE,IAAI,EAAE,uBAAuBkF,SAAS,CAAClD,MAAM,GAAG,CAAC,EACrEkD,SAAS,CAAClD,MAAM,GAAG,CAAC,GAChBkD,SAAS,CAAC5C,GAAG,CAAC,CAACkD,QAAQ,EAAEF,QAAQ,KAAKI,sBAAsB,CAACF,QAAQ,EAAEF,QAAQ,CAAC,CAAC,GACjFtF,aAAa,CAAC,GAAG,EAAE,IAAI,EAAE,uCAAuC,CACxE,CAAC;EACL,CAAC;;EAED;EACA;EACA;;EAEA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA,MAAM4G,cAAc,GAAGA,CAAA,KAAM;IAAE;IAC3B,IAAI,CAACtF,aAAa,EAAE,OAAOtB,aAAA,YAAG,oDAAqD,CAAC;IAEpF,MAAMmC,KAAK,GAAGjB,MAAM,CAAC2F,OAAO,CAACvF,aAAa,CAAC;IAE3C,OACItB,aAAA,CAACK,KAAK;MAACyG,MAAM,EAAC;IAAgB,GAE1B9G,aAAA,CAACM,SAAS;MAACqF,KAAK,EAAE,YAAYrE,aAAa,CAACZ,KAAK,KAAKY,aAAa,CAACO,IAAI,GAAI;MAAC+D,WAAW,EAAE;IAAK,GAC3F5F,aAAA,CAACI,WAAW;MACRM,KAAK,EAAC,aAAa;MACnBC,KAAK,EAAEW,aAAa,CAACZ,KAAM;MAC3BoF,QAAQ,EAAEC,GAAG,IAAI7D,WAAW,CAACC,KAAK,EAAE,OAAO,EAAE4D,GAAG;IAAE,CACrD,CAAC,EACF/F,aAAA,CAACI,WAAW;MACRM,KAAK,EAAC,+BAA+B;MACrCC,KAAK,EAAEW,aAAa,CAACS,GAAI;MACzBiE,IAAI,EAAC,gFAAgF;MACrFF,QAAQ,EAAEC,GAAG,IAAI7D,WAAW,CAACC,KAAK,EAAE,KAAK,EAAE4D,GAAG;IAAE,CACnD,CAAC,EACF/F,aAAA,CAACI,WAAW;MACRM,KAAK,EAAC,0BAA0B;MAChCC,KAAK,EAAEW,aAAa,CAACW,OAAQ;MAC7B6D,QAAQ,EAAEC,GAAG,IAAI7D,WAAW,CAACC,KAAK,EAAE,SAAS,EAAE4D,GAAG;IAAE,CACvD,CAAC,EACF/F,aAAA,CAACG,MAAM;MACHgG,aAAa;MACbC,OAAO,EAAEA,CAAA,KAAM3D,WAAW,CAACN,KAAK,CAAE;MAClCkE,KAAK,EAAE;QAACC,SAAS,EAAE;MAAM;IAAE,GAC9B,cAEO,CACD,CAAC,EAGXhF,aAAa,CAACO,IAAI,KAAK,UAAU,IAC9BiD,sBAAsB,CAACxD,aAAa,EAAEa,KAAK,EAAED,WAAW,EAAEO,WAAW,CAEtE,CAAC;EAEhB,CAAC;EAGD,OAAOzC,aAAa,CAChB,KAAK,EACL;IAAEqG,KAAK,EAAE;MAAEE,OAAO,EAAE,MAAM;MAAEE,GAAG,EAAE,MAAM;MAAEH,SAAS,EAAE;IAAO;EAAE,CAAC;EAE9D;EACAtG,aAAa,CACT,KAAK,EACL;IAAEqG,KAAK,EAAE;MAAEU,KAAK,EAAE,KAAK;MAAEC,WAAW,EAAE,gBAAgB;MAAEC,YAAY,EAAE;IAAO;EAAE,CAAC,EAChFjH,aAAa,CAAC,IAAI,EAAE,IAAI,EAAE,mBAAmB,CAAC,EAC9CS,WAAW,CAAC6B,GAAG,CAACT,IAAI,IAChB7B,aAAa,CAACG,MAAM,EAAE;IAClBwG,WAAW,EAAE,IAAI;IACjBN,KAAK,EAAE;MAAEE,OAAO,EAAE,OAAO;MAAEQ,KAAK,EAAE,MAAM;MAAEL,YAAY,EAAE;IAAO,CAAC;IAChEN,OAAO,EAAEA,CAAA,KAAMxE,QAAQ,CAACC,IAAI,CAAClB,KAAK;EACtC,CAAC,EAAEkB,IAAI,CAACnB,KAAK,CACjB,CACJ,CAAC;EAED;EACAV,aAAa,CACT,KAAK,EACL;IAAEqG,KAAK,EAAE;MAAEU,KAAK,EAAE;IAAM;EAAE,CAAC,EAC3B/G,aAAa,CAAC,IAAI,EAAE,IAAI,EAAE,iBAAiB,CAAC;EAE5C;EACAkB,MAAM,CAACoB,GAAG,CAAC,CAACC,KAAK,EAAEJ,KAAK,KACpBnC,aAAa,CAAC,KAAK,EAAE;IACjB+B,GAAG,EAAEI,KAAK;IACVkE,KAAK,EAAE;MACHa,OAAO,EAAE,MAAM;MACfR,YAAY,EAAE,KAAK;MACnBS,MAAM,EAAE,gBAAgB;MACxBC,eAAe,EAAE9F,aAAa,KAAKiB,KAAK,GAAG,SAAS,GAAG,MAAM;MAC7D8E,MAAM,EAAE,SAAS;MACjBd,OAAO,EAAE,MAAM;MACfe,cAAc,EAAE;IACpB,CAAC;IACDlB,OAAO,EAAEA,CAAA,KAAM7E,gBAAgB,CAACgB,KAAK;EACzC,CAAC,EACDvC,aAAa,CAAC,MAAM,EAAE,IAAI,EAAE,GAAGuC,KAAK,CAAC7B,KAAK,KAAK6B,KAAK,CAACV,IAAI,GAAG,CAAC;EAC7D;EACA7B,aAAa,CAACG,MAAM,EAAE;IAClBoH,OAAO,EAAE,IAAI;IACbC,UAAU,EAAE,IAAI;IAChBpB,OAAO,EAAGqB,CAAC,IAAK;MAAEA,CAAC,CAACC,eAAe,CAAC,CAAC;MAAE9E,iBAAiB,CAACL,KAAK,CAACR,GAAG,CAAC;IAAE;EACzE,CAAC,EAAE,aAAa,CAChB,CACJ,CAAC,EACD/B,aAAa,CAAC,IAAI,EAAE;IAAEqG,KAAK,EAAE;MAAEsB,MAAM,EAAE;IAAS;EAAE,CAAC,CAAC;EACpD;EACA3H,aAAa,CAAC,IAAI,EAAE,IAAI,EAAE,kBAAkB,CAAC,EAC7CA,aAAa,CAAC,GAAG,EAAE;IAAEqG,KAAK,EAAE;MAAEuB,QAAQ,EAAE,MAAM;MAAEC,KAAK,EAAE;IAAO;EAAE,CAAC,EAC7D,iGACJ,CAAC,EAED7H,aAAa,CAAC,UAAU,EAAE;IACtB8H,EAAE,EAAE,uBAAuB;IAC3BnH,KAAK,EAAEe,QAAQ;IACfoE,QAAQ,EAAG2B,CAAC,IAAK9F,WAAW,CAAC8F,CAAC,CAACM,MAAM,CAACpH,KAAK,CAAC;IAC5C0F,KAAK,EAAE;MACHU,KAAK,EAAE,MAAM;MACbiB,SAAS,EAAE,OAAO;MAClBC,UAAU,EAAE,WAAW;MACvBf,OAAO,EAAE,MAAM;MACfU,QAAQ,EAAE,MAAM;MAChBT,MAAM,EAAE,mBAAmB;MAC3Be,YAAY,EAAE;IAClB,CAAC;IACDC,WAAW,EAAE,iCAAiCjH,MAAM,CAAC,CAAC,CAAC,EAAEa,GAAG,IAAI,WAAW;EAC/E,CAAC,CAAC,EACF/B,aAAa,CAAC,IAAI,EAAE,IAAI,CAAC;EAEzB;EACAA,aAAa,CAACG,MAAM,EAAE;IAClBiI,SAAS,EAAE,IAAI;IACfC,MAAM,EAAEjH,QAAQ;IAChB;IACAgF,OAAO,EAAEA,CAAA,KAAMzC,UAAU,CAACzC,MAAM,EAAEQ,QAAQ,CAAC;IAAE;IAC7C4G,QAAQ,EAAElH;EACd,CAAC,EAAEA,QAAQ,GAAG,mBAAmB,GAAG,8BAA8B,CAAC,EAEnEI,OAAO,IAAIxB,aAAa,CAAC,GAAG,EAAE;IAAEqG,KAAK,EAAE;MAAEC,SAAS,EAAE,MAAM;MAAEiC,UAAU,EAAE;IAAO;EAAE,CAAC,EAAE/G,OAAO,CAC/F,CAAC;EAED;EACAxB,aAAa,CACT,KAAK,EACL;IAAEqG,KAAK,EAAE;MAAEU,KAAK,EAAE;IAAM;EAAE,CAAC,EAC3BH,cAAc,CAAC,CACnB,CACJ,CAAC;AACL,CAAC;;AAGD;AACAxC,MAAM,CAACtB,QAAQ,CAAC,CAAC0F,KAAK,CAAC,YAAW;EAC9B,MAAMC,WAAW,GAAG3F,QAAQ,CAACC,cAAc,CAAC,uBAAuB,CAAC;;EAEpE;EACA,IAAI0F,WAAW,IAAI,OAAO1E,kBAAkB,KAAK,WAAW,EAAE;IAC1D9D,EAAE,CAACC,OAAO,CAACwI,MAAM,CACb1I,aAAa,CAACe,kBAAkB,EAAE;MAC9B;MACAC,aAAa,EAAE+C,kBAAkB,CAAC4E,MAAM;MACxC1H,SAAS,EAAE8C,kBAAkB,CAAC9C;IAClC,CAAC,CAAC,EACFwH,WACJ,CAAC;EACL;AACJ,CAAC,CAAC,C","sources":["webpack://block-factory-blocks/./src/editor-app.js"],"sourcesContent":["/**\r\n * Editor Application for defining block components.\r\n */\r\nconst { useState, useEffect, createElement } = wp.element;\r\nconst { Button, TextControl, Panel, PanelBody, SelectControl } = wp.components;\r\n\r\n// Define the available field types (your component palette)\r\nconst FIELD_TYPES = [\r\n    { label: 'Text Input', value: 'text' },\r\n    { label: 'Number Input', value: 'number' },\r\n    { label: 'Range Slider', value: 'range' }, // New\r\n    // { label: 'Email Address', value: 'email' }, // New (uses TextControl)\r\n    { label: 'URL Link', value: 'url' },       // New (uses URLInput or TextControl)\r\n    \r\n    { label: 'Text Area', value: 'textarea' },\r\n    { label: 'Rich Text Content', value: 'contentEditor' }, // Existing/Renamed (WYSIWYG)\r\n    \r\n    { label: 'Image/Media', value: 'image' },\r\n    { label: 'File Upload', value: 'file' }, // New (uses MediaUpload)\r\n    { label: 'Gallery', value: 'gallery' }, // New (complex, placeholder added)\r\n    \r\n    { label: 'Date Picker', value: 'date' },\r\n    { label: 'Date Time Picker', value: 'datetime' }, // New\r\n    { label: 'Time Picker', value: 'time' },         // New\r\n    \r\n    { label: 'Color Picker', value: 'color' },\r\n    { label: 'Icon Picker', value: 'icon' }, // New (Placeholder)\r\n    \r\n    { label: 'Repeater/Group', value: 'repeater' }, // Complex, requires nested fields\r\n    { label: 'Relational (Post Select)', value: 'relational' }, // Complex, placeholder added\r\n];\r\n\r\n// --- NEW CODE ADDED HERE (Utility Function) ---\r\nconst slugifyKey = (value) => value.toLowerCase().replace(/[^a-z0-9_]/g, '');\r\n\r\n// --- 1. The Main Application Component ---\r\nconst ComponentEditorApp = ({ initialConfig, blockSlug }) => {\r\n    // State to hold the array of fields (the component structure)\r\n    const [fields, setFields] = useState(initialConfig.fields || []);\r\n    const [isSaving, setIsSaving] = useState(false);\r\n    const [selectedField, setSelectedField] = useState(null); // Field being edited\r\n    const [message, setMessage] = useState('');\r\n    const [template, setTemplate] = useState(initialConfig.template || '');\r\n    // --- Helper function to add a new field ---\r\n    const addField = (type) => {\r\n        const newField = {\r\n            type: type,\r\n            key: `new_field_${fields.length}`,\r\n            label: `New ${type} Field`,\r\n            default: '',\r\n        };\r\n        setFields([...fields, newField]);\r\n        setSelectedField(newField); // Automatically select the new field for editing\r\n    };\r\n\r\n    // --- Helper function to update a field's properties ---\r\n    const updateField = (index, property, value) => {\r\n        const newFields = fields.map((field, i) => {\r\n            if (i === index) {\r\n                // Ensure key is slugified\r\n                if (property === 'key') {\r\n                    value = value.toLowerCase().replace(/[^a-z0-9_]/g, '');\r\n                }\r\n                return { ...field, [property]: value };\r\n            }\r\n            return field;\r\n        });\r\n        setFields(newFields);\r\n        // Also update the selected field reference if it's the one being edited\r\n        setSelectedField(newFields[index]); \r\n    };\r\n\r\n    // --- Helper function to remove a field ---\r\n    const removeField = (index) => {\r\n        setFields(fields.filter((_, i) => i !== index));\r\n        setSelectedField(null);\r\n    };\r\n\r\n    // Helper to insert tags like {{field_key}} at cursor position\r\n    const insertTagAtCursor = (key) => {\r\n        const textarea = document.getElementById('bf-html-template-area');\r\n        const start = textarea.selectionStart;\r\n        const end = textarea.selectionEnd;\r\n        const text = textarea.value;\r\n        const tag = `{{${key}}}`;\r\n        \r\n        const newContent = text.substring(0, start) + tag + text.substring(end);\r\n        setTemplate(newContent);\r\n\r\n        // Maintain focus and move cursor after the tag\r\n        setTimeout(() => {\r\n            textarea.focus();\r\n            textarea.setSelectionRange(start + tag.length, start + tag.length);\r\n        }, 10);\r\n    };\r\n    // --- AJAX Save Handler ---\r\n    // --- AJAX Save Handler ---\r\n    const handleSave = () => {\r\n        setIsSaving(true);\r\n        setMessage('Saving structure...');\r\n\r\n        const data = {\r\n            action: 'block_factory_save_structure',\r\n            nonce: blockFactoryEditor.nonce, \r\n            block_slug: blockSlug,\r\n            config_data: JSON.stringify({ fields, template }),\r\n        };\r\n\r\n        jQuery.post(ajaxurl, data)\r\n            .done(response => {\r\n                if (response.success) {\r\n                    setMessage('✅ Structure saved! Starting build...');\r\n                    triggerBuild(); // Auto-trigger build\r\n                } else {\r\n                    setMessage(`❌ Error: ${response.data.message}`);\r\n                    setIsSaving(false);\r\n                }\r\n            })\r\n            .fail(() => {\r\n                setMessage('❌ Critical Error: Could not reach the server.');\r\n                setIsSaving(false);\r\n            });\r\n    };\r\n\r\n    // --- AJAX Build Trigger ---\r\n    const triggerBuild = () => {\r\n        jQuery.post(ajaxurl, {\r\n            action: 'bf_run_npm_build',\r\n            nonce: blockFactoryEditor.nonce \r\n        })\r\n        .done(response => {\r\n            if (response.success) {\r\n                setMessage('✅ Build Complete! Your block is ready.');\r\n            } else {\r\n                setMessage(`⚠️ Build Failed. Error Details:\\n${response.output}`);\r\n            }\r\n        })\r\n        .fail(() => {\r\n            setMessage('⚠️ Save success, but Build request failed.');\r\n        })\r\n        .always(() => {\r\n            setIsSaving(false);\r\n        });\r\n    };\r\n\r\n\r\n    // --- NEW CODE ADDED HERE (Repeater Renderer) ---\r\n    const renderRepeaterSettings = (field, fieldIndex, updateFieldProp, removeFieldAtIndex) => {\r\n        // Initialize the subFields array if it doesn't exist\r\n        const subFields = field.subFields || [];\r\n\r\n        // Function to add a new sub-field to the repeater\r\n        const addSubField = (type) => {\r\n            const newSubField = {\r\n                type: type,\r\n                key: slugifyKey(`sub_field_${subFields.length}_${type}`),\r\n                label: `New ${type} Sub-Field`,\r\n                default: '',\r\n            };\r\n            // Update the main field's subFields property\r\n            updateFieldProp(fieldIndex, 'subFields', [...subFields, newSubField]);\r\n        };\r\n\r\n        // Function to update a sub-field's properties\r\n        const updateSubField = (subIndex, property, value) => {\r\n            const newSubFields = subFields.map((subField, i) => {\r\n                if (i === subIndex) {\r\n                    // Ensure key is slugified for the sub-field\r\n                    if (property === 'key') {\r\n                        value = slugifyKey(value);\r\n                    }\r\n                    return { ...subField, [property]: value };\r\n                }\r\n                return subField;\r\n            });\r\n            updateFieldProp(fieldIndex, 'subFields', newSubFields);\r\n        };\r\n\r\n        // Function to remove a sub-field\r\n        const removeSubField = (subIndex) => {\r\n            const newSubFields = subFields.filter((_, i) => i !== subIndex);\r\n            updateFieldProp(fieldIndex, 'subFields', newSubFields);\r\n        };\r\n        \r\n        // Function to render the settings for an individual sub-field\r\n        const renderSubFieldSettings = (subField, subIndex) => {\r\n            return createElement(\r\n                PanelBody,\r\n                { title: `${subField.label} (${subField.type})`, initialOpen: false, key: subIndex, className: 'repeater-sub-field-settings' },\r\n                createElement(TextControl, {\r\n                    label: \"Sub-Field Label\",\r\n                    value: subField.label,\r\n                    onChange: val => updateSubField(subIndex, 'label', val),\r\n                }),\r\n                createElement(TextControl, {\r\n                    label: \"Attribute Key (Variable Name)\",\r\n                    value: subField.key,\r\n                    help: \"Must be unique, lowercase, and contain only letters, numbers, and underscores.\",\r\n                    onChange: val => updateSubField(subIndex, 'key', val),\r\n                }),\r\n                createElement(SelectControl, {\r\n                    label: \"Sub-Field Type\",\r\n                    value: subField.type,\r\n                    options: FIELD_TYPES.map(t => ({ label: t.label, value: t.value })).filter(t => t.value !== 'repeater'),\r\n                    onChange: val => updateSubField(subIndex, 'type', val),\r\n                }),\r\n                createElement(Button, { \r\n                    isDestructive: true, \r\n                    onClick: () => removeSubField(subIndex),\r\n                    style: { marginTop: '10px' }\r\n                }, 'Delete Sub-Field')\r\n            );\r\n        };\r\n\r\n        return createElement(\r\n            PanelBody,\r\n            { title: 'Repeater Sub-Fields', initialOpen: true },\r\n            \r\n            // 1. Add New Sub-Field Palette\r\n            createElement('h4', null, 'Add New Sub-Field'),\r\n            createElement('div', { style: { display: 'flex', flexWrap: 'wrap', gap: '5px', marginBottom: '15px' } },\r\n                FIELD_TYPES.filter(t => t.value !== 'repeater' && t.value !== 'relational').map(type =>\r\n                    createElement(Button, { \r\n                        isSecondary: true, \r\n                        onClick: () => addSubField(type.value)\r\n                    }, type.label)\r\n                )\r\n            ),\r\n\r\n            // 2. List of Existing Sub-Fields\r\n            createElement('h4', null, `Current Sub-Fields (${subFields.length})`),\r\n            subFields.length > 0 ? \r\n                subFields.map((subField, subIndex) => renderSubFieldSettings(subField, subIndex)) :\r\n                createElement('p', null, 'No sub-fields defined. Add one above.')\r\n        );\r\n    };\r\n\r\n    // --- Render the Field Settings Panel ---\r\n    // const renderSettings = () => {\r\n    //     if (!selectedField) return <p>Select a field on the left to edit its properties.</p>;\r\n        \r\n    //     const index = fields.indexOf(selectedField);\r\n\r\n    //     return (\r\n    //         <Panel header=\"Field Settings\">\r\n    //             <PanelBody title={`Editing: ${selectedField.label} (${selectedField.type})`} initialOpen={true}>\r\n    //                 <TextControl\r\n    //                     label=\"Field Label\"\r\n    //                     value={selectedField.label}\r\n    //                     onChange={val => updateField(index, 'label', val)}\r\n    //                 />\r\n    //                 <TextControl\r\n    //                     label=\"Attribute Key (Variable Name)\"\r\n    //                     value={selectedField.key}\r\n    //                     help=\"Must be unique, lowercase, and contain only letters, numbers, and underscores.\"\r\n    //                     onChange={val => updateField(index, 'key', val)}\r\n    //                 />\r\n    //                 <TextControl\r\n    //                     label=\"Default Value (Optional)\"\r\n    //                     value={selectedField.default}\r\n    //                     onChange={val => updateField(index, 'default', val)}\r\n    //                 />\r\n    //                 <Button \r\n    //                     isDestructive \r\n    //                     onClick={() => removeField(index)} \r\n    //                     style={{marginTop: '10px'}}\r\n    //                 >\r\n    //                     Delete Field\r\n    //                 </Button>\r\n    //             </PanelBody>\r\n    //         </Panel>\r\n    //     );\r\n    // };\r\n    // --- Render the Field Settings Panel ---\r\n    const renderSettings = () => { // <--- THIS FUNCTION IS REPLACED\r\n        if (!selectedField) return <p>Select a field on the left to edit its properties.</p>;\r\n        \r\n        const index = fields.indexOf(selectedField);\r\n\r\n        return (\r\n            <Panel header=\"Field Settings\">\r\n                {/* Standard Settings (Label, Key, Default, Delete) */}\r\n                <PanelBody title={`Editing: ${selectedField.label} (${selectedField.type})`} initialOpen={true}>\r\n                    <TextControl\r\n                        label=\"Field Label\"\r\n                        value={selectedField.label}\r\n                        onChange={val => updateField(index, 'label', val)}\r\n                    />\r\n                    <TextControl\r\n                        label=\"Attribute Key (Variable Name)\"\r\n                        value={selectedField.key}\r\n                        help=\"Must be unique, lowercase, and contain only letters, numbers, and underscores.\"\r\n                        onChange={val => updateField(index, 'key', val)}\r\n                    />\r\n                    <TextControl\r\n                        label=\"Default Value (Optional)\"\r\n                        value={selectedField.default}\r\n                        onChange={val => updateField(index, 'default', val)}\r\n                    />\r\n                    <Button \r\n                        isDestructive \r\n                        onClick={() => removeField(index)} \r\n                        style={{marginTop: '10px'}}\r\n                    >\r\n                        Delete Field\r\n                    </Button>\r\n                </PanelBody>\r\n\r\n                {/* CONDITIONALLY RENDER REPEATER SUB-FIELDS SETTINGS */}\r\n                {selectedField.type === 'repeater' && \r\n                    renderRepeaterSettings(selectedField, index, updateField, removeField)\r\n                }\r\n            </Panel>\r\n        );\r\n    };\r\n\r\n\r\n    return createElement(\r\n        'div',\r\n        { style: { display: 'flex', gap: '20px', marginTop: '20px' } },\r\n        \r\n        // --- Left Column: Component Palette ---\r\n        createElement(\r\n            'div',\r\n            { style: { width: '20%', borderRight: '1px solid #ccc', paddingRight: '20px' } },\r\n            createElement('h3', null, 'Component Palette'),\r\n            FIELD_TYPES.map(type => \r\n                createElement(Button, { \r\n                    isSecondary: true, \r\n                    style: { display: 'block', width: '100%', marginBottom: '10px' },\r\n                    onClick: () => addField(type.value)\r\n                }, type.label)\r\n            )\r\n        ),\r\n        \r\n        // --- Middle Column: Component Structure (The Fields List) ---\r\n        createElement(\r\n            'div',\r\n            { style: { width: '40%' } },\r\n            createElement('h3', null, 'Block Structure'),\r\n            \r\n            // Render the list of fields\r\n            fields.map((field, index) => \r\n                createElement('div', { \r\n                    key: index, \r\n                    style: { \r\n                        padding: '10px', \r\n                        marginBottom: '8px', \r\n                        border: '1px solid #ddd',\r\n                        backgroundColor: selectedField === field ? '#eaf4ff' : '#fff',\r\n                        cursor: 'pointer',\r\n                        display: 'flex',\r\n                        justifyContent: 'space-between'\r\n                    },\r\n                    onClick: () => setSelectedField(field)\r\n                }, \r\n                createElement('span', null, `${field.label} (${field.type})`),\r\n                // NEW: Quick-add button next to field names\r\n                createElement(Button, { \r\n                    isSmall: true, \r\n                    isTertiary: true,\r\n                    onClick: (e) => { e.stopPropagation(); insertTagAtCursor(field.key); }\r\n                }, 'Add to HTML')\r\n                )\r\n            ),\r\n            createElement('hr', { style: { margin: '20px 0' } }),\r\n            // --- NEW SECTION: HTML TEMPLATE EDITOR ---\r\n            createElement('h3', null, '2. HTML Template'),\r\n            createElement('p', { style: { fontSize: '12px', color: '#666' } }, \r\n                'Write your HTML below. Click the \"Add to HTML\" buttons above or use {{field_key}} placeholders.'\r\n            ),\r\n            \r\n            createElement('textarea', {\r\n                id: 'bf-html-template-area',\r\n                value: template,\r\n                onChange: (e) => setTemplate(e.target.value),\r\n                style: { \r\n                    width: '100%', \r\n                    minHeight: '350px', \r\n                    fontFamily: 'monospace', \r\n                    padding: '12px',\r\n                    fontSize: '13px',\r\n                    border: '1px solid #757575',\r\n                    borderRadius: '4px'\r\n                },\r\n                placeholder: `<div class=\"banner\">\\n  <h2>{{${fields[0]?.key || 'field_key'}}}</h2>\\n</div>`\r\n            }),\r\n            createElement('hr', null),\r\n            \r\n            // Save Button and Messages\r\n            createElement(Button, { \r\n                isPrimary: true,\r\n                isBusy: isSaving,\r\n                // onClick: handleSave,\r\n                onClick: () => handleSave(fields, template), // Pass both to save function\r\n                disabled: isSaving\r\n            }, isSaving ? 'Compiling Code...' : 'Save Structure & Build Block'),\r\n\r\n            message && createElement('p', { style: { marginTop: '15px', fontWeight: 'bold' } }, message)\r\n        ),\r\n\r\n        // --- Right Column: Settings Panel ---\r\n        createElement(\r\n            'div',\r\n            { style: { width: '40%' } },\r\n            renderSettings()\r\n        )\r\n    );\r\n};\r\n\r\n \r\n// --- Render the application once the DOM is ready ---\r\njQuery(document).ready(function() {\r\n    const rootElement = document.getElementById('component-editor-root');\r\n    \r\n    // Check if the localized data object exists (blockFactoryEditor)\r\n    if (rootElement && typeof blockFactoryEditor !== 'undefined') { \r\n        wp.element.render(\r\n            createElement(ComponentEditorApp, { \r\n                // CRITICAL: Access the nested properties\r\n                initialConfig: blockFactoryEditor.config, \r\n                blockSlug: blockFactoryEditor.blockSlug \r\n            }),\r\n            rootElement\r\n        );\r\n    }\r\n});"],"names":["useState","useEffect","createElement","wp","element","Button","TextControl","Panel","PanelBody","SelectControl","components","FIELD_TYPES","label","value","slugifyKey","toLowerCase","replace","ComponentEditorApp","initialConfig","blockSlug","fields","setFields","isSaving","setIsSaving","selectedField","setSelectedField","message","setMessage","template","setTemplate","addField","type","newField","key","length","default","updateField","index","property","newFields","map","field","i","removeField","filter","_","insertTagAtCursor","textarea","document","getElementById","start","selectionStart","end","selectionEnd","text","tag","newContent","substring","setTimeout","focus","setSelectionRange","handleSave","data","action","nonce","blockFactoryEditor","block_slug","config_data","JSON","stringify","jQuery","post","ajaxurl","done","response","success","triggerBuild","fail","output","always","renderRepeaterSettings","fieldIndex","updateFieldProp","removeFieldAtIndex","subFields","addSubField","newSubField","updateSubField","subIndex","newSubFields","subField","removeSubField","renderSubFieldSettings","title","initialOpen","className","onChange","val","help","options","t","isDestructive","onClick","style","marginTop","display","flexWrap","gap","marginBottom","isSecondary","renderSettings","indexOf","header","width","borderRight","paddingRight","padding","border","backgroundColor","cursor","justifyContent","isSmall","isTertiary","e","stopPropagation","margin","fontSize","color","id","target","minHeight","fontFamily","borderRadius","placeholder","isPrimary","isBusy","disabled","fontWeight","ready","rootElement","render","config"],"ignoreList":[],"sourceRoot":""}